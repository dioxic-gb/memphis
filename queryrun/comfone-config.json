{
  "mongoUri": "127.0.0.1",
  "database": "comfone",
  "collection": {
    "name": "edtrs2",
    "writeConcern": {
      "w": "majority",
      "journal": false
    }
  },
  "tests": [
    {
      "name": "test1",
      "stages": [
        {
          "name": "drop collection",
          "operation": {
            "type": "dropCollection"
          }
        },
        {
          "name": "create indexes",
          "operation": {
            "type": "createIndex",
            "indexes": [
              {
                "keys": {
                  "pi": 1,
                  "zt": 1,
                  "ts": 1
                }
              },
              {
                "keys": {
                  "pi": 1,
                  "ts": 1
                }
              },
              {
                "keys": {
                  "ts": 1
                }
              }
            ]
          }
        },
        {
          "name": "insert some stuff",
          "operation": {
            "type": "insertMany",
            "threads": 10,
            "totalDocuments": 10000,
            "batchSize": 100,
            "options": {
              "ordered": false,
              "bypassDocumentValidation": true
            },
            "templates": [
              {
                "templateFile": "templates/etdrs.json",
                "placeholderFile": "edtrs-placeholders.json",
                "weighting": 10
              }
            ]
          }
        },
        {
          "name": "sample data",
          "operation": {
            "type": "sampleData",
            "size": 100,
            "cacheKey": "idCache",
            "fields": [
              "embed.id",
              "et",
              "pi",
              "zt"
            ]
          }
        },
        {
          "name": "find some stuff",
          "operation": {
            "type": "find",
            "iterations": 100,
            "threads": 10,
            "limit": 100,
            "sort": {
              "ts": -1
            },
            "templates": [
              {
                "templateFile": "queries/edtrs1.json",
                "placeholderFile": "edtrs-query-placeholders.json"
              },
              {
                "templateFile": "queries/edtrs2.json",
                "placeholderFile": "edtrs-query-placeholders.json"
              },
              {
                "templateFile": "queries/edtrs3.json",
                "placeholderFile": "edtrs-query-placeholders.json"
              }
            ]
          }
        }
      ]
    }
  ]
}
